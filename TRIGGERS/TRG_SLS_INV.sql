--------------------------------------------------------
--  DDL for Trigger TRG_SLS$INV
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "SLS"."TRG_SLS$INV" AFTER
UPDATE OR DELETE ON SLS$INV
  REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW

BEGIN

IF UPDATING THEN
INSERT
INTO trc.SLS$INV_TRC
  (
    BILL_ADD,
    CASH_CUST_NM,
    CLD_ID,
    COA_ID,
    CURR_ID_BS,
    CURR_ID_SP,
    CURR_RATE,
    DIRCT_PRNT_CHK,
    DIRCT_PRNT_CHK_FR_INV_RPT,
    DISC_TYPE,
    DISC_VAL,
    DISP_DOC_ID,
    DOC_DT,
    DOC_ID,
    DRFT_INV_ID,
    EO_ID,
    EXP_VOU_ID,
    EXT_DOC_DT,
    EXT_DOC_NO,
    EX_TRD_FLG,
    FORM_AMT,
    FORM_NO,
    FORM_RCVD,
    FORM_RCVD_DT,
    FORM_RCVD_RMRK,
    FY_ID,
    HO_ORG_ID,
    INCL_SRVC_ITM,
    INTIM_SLIP_ID,
    INV_MODE,
    INV_STAT,
    INV_SUB_TYPE,
    INV_TYPE,
    LC_ID,
    MAIL_SENT_CHK,
    MANUL_REMOV_DT,
    ORG_ID,
    PDR_CALCULATED,
    PEND_LC_AMT,
    PRJ_ID,
    REASON,
    REF_DOC_ID,
    REMARKS,
    REV_EXP_VOU_ID,
    REV_SALES_VOU_ID,
    RPRT_PRNT_CNT,
    SALES_VOU_ID,
    SEI_CALCULATED,
    SHIP_TO_ADDS,
    SHIP_TO_NM,
    SLOC_ID,
    SUPPLI_OPER_TYPE,
    TAX_AFTER_DISC_FLG,
    TAX_FORM_TYP_ID,
    TAX_RULE_FLG,
    TOT_AMT_BS,
    TOT_AMT_SP,
    TOT_ITM_AMT_GS_BS,
    TOT_ITM_AMT_GS_SP,
    USR_ID_CREATE,
    USR_ID_CREATE_DT,
    USR_ID_MOD,
    USR_ID_MOD_DT,
    row_add_dt,
    statmnt_type,
    user_nm,
    usr_ipaddr,
	TAX_TYPE,
	REF_SO_ID

  )
  VALUES
  (
    :NEW.BILL_ADD,
    :NEW.CASH_CUST_NM,
    :NEW.CLD_ID,
    :NEW.COA_ID,
    :NEW.CURR_ID_BS,
    :NEW.CURR_ID_SP,
    :NEW.CURR_RATE,
    :NEW.DIRCT_PRNT_CHK,
    :NEW.DIRCT_PRNT_CHK_FR_INV_RPT,
    :NEW.DISC_TYPE,
    :NEW.DISC_VAL,
    :NEW.DISP_DOC_ID,
    :NEW.DOC_DT,
    :NEW.DOC_ID,
    :NEW.DRFT_INV_ID,
    :NEW.EO_ID,
    :NEW.EXP_VOU_ID,
    :NEW.EXT_DOC_DT,
    :NEW.EXT_DOC_NO,
    :NEW.EX_TRD_FLG,
    :NEW.FORM_AMT,
    :NEW.FORM_NO,
    :NEW.FORM_RCVD,
    :NEW.FORM_RCVD_DT,
    :NEW.FORM_RCVD_RMRK,
    :NEW.FY_ID,
    :NEW.HO_ORG_ID,
    :NEW.INCL_SRVC_ITM,
    :NEW.INTIM_SLIP_ID,
    :NEW.INV_MODE,
    :NEW.INV_STAT,
    :NEW.INV_SUB_TYPE,
    :NEW.INV_TYPE,
    :NEW.LC_ID,
    :NEW.MAIL_SENT_CHK,
    :NEW.MANUL_REMOV_DT,
    :NEW.ORG_ID,
    :NEW.PDR_CALCULATED,
    :NEW.PEND_LC_AMT,
    :NEW.PRJ_ID,
    :NEW.REASON,
    :NEW.REF_DOC_ID,
    :NEW.REMARKS,
    :NEW.REV_EXP_VOU_ID,
    :NEW.REV_SALES_VOU_ID,
    :NEW.RPRT_PRNT_CNT,
    :NEW.SALES_VOU_ID,
    :NEW.SEI_CALCULATED,
    :NEW.SHIP_TO_ADDS,
    :NEW.SHIP_TO_NM,
    :NEW.SLOC_ID,
    :NEW.SUPPLI_OPER_TYPE,
    :NEW.TAX_AFTER_DISC_FLG,
    :NEW.TAX_FORM_TYP_ID,
    :NEW.TAX_RULE_FLG,
    :NEW.TOT_AMT_BS,
    :NEW.TOT_AMT_SP,
    :NEW.TOT_ITM_AMT_GS_BS,
    :NEW.TOT_ITM_AMT_GS_SP,
    :NEW.USR_ID_CREATE,
    :NEW.USR_ID_CREATE_DT,
    :NEW.USR_ID_MOD,
    :NEW.USR_ID_MOD_DT,
    SYSTIMESTAMP,
    'U',
    'SLS',
    (SELECT SYS_CONTEXT('USERENV','IP_ADDRESS') FROM DUAL
    ),
	:NEW.TAX_TYPE,
	:NEW.REF_SO_ID
  );
END IF;
IF DELETING THEN
  INSERT
  INTO trc.SLS$INV_TRC
    (
      BILL_ADD,
      CASH_CUST_NM,
      CLD_ID,
      COA_ID,
      CURR_ID_BS,
      CURR_ID_SP,
      CURR_RATE,
      DIRCT_PRNT_CHK,
      DIRCT_PRNT_CHK_FR_INV_RPT,
      DISC_TYPE,
      DISC_VAL,
      DISP_DOC_ID,
      DOC_DT,
      DOC_ID,
      DRFT_INV_ID,
      EO_ID,
      EXP_VOU_ID,
      EXT_DOC_DT,
      EXT_DOC_NO,
      EX_TRD_FLG,
      FORM_AMT,
      FORM_NO,
      FORM_RCVD,
      FORM_RCVD_DT,
      FORM_RCVD_RMRK,
      FY_ID,
      HO_ORG_ID,
      INCL_SRVC_ITM,
      INTIM_SLIP_ID,
      INV_MODE,
      INV_STAT,
      INV_SUB_TYPE,
      INV_TYPE,
      LC_ID,
      MAIL_SENT_CHK,
      MANUL_REMOV_DT,
      ORG_ID,
      PDR_CALCULATED,
      PEND_LC_AMT,
      PRJ_ID,
      REASON,
      REF_DOC_ID,
      REMARKS,
      REV_EXP_VOU_ID,
      REV_SALES_VOU_ID,
      RPRT_PRNT_CNT,
      SALES_VOU_ID,
      SEI_CALCULATED,
      SHIP_TO_ADDS,
      SHIP_TO_NM,
      SLOC_ID,
      SUPPLI_OPER_TYPE,
      TAX_AFTER_DISC_FLG,
      TAX_FORM_TYP_ID,
      TAX_RULE_FLG,
      TOT_AMT_BS,
      TOT_AMT_SP,
      TOT_ITM_AMT_GS_BS,
      TOT_ITM_AMT_GS_SP,
      USR_ID_CREATE,
      USR_ID_CREATE_DT,
      USR_ID_MOD,
      USR_ID_MOD_DT,
      row_add_dt,
      statmnt_type,
      user_nm,
      usr_ipaddr,
	  TAX_TYPE,
	  REF_SO_ID
    )
    VALUES
    (
      :OLD.BILL_ADD,
      :OLD.CASH_CUST_NM,
      :OLD.CLD_ID,
      :OLD.COA_ID,
      :OLD.CURR_ID_BS,
      :OLD.CURR_ID_SP,
      :OLD.CURR_RATE,
      :OLD.DIRCT_PRNT_CHK,
      :OLD.DIRCT_PRNT_CHK_FR_INV_RPT,
      :OLD.DISC_TYPE,
      :OLD.DISC_VAL,
      :OLD.DISP_DOC_ID,
      :OLD.DOC_DT,
      :OLD.DOC_ID,
      :OLD.DRFT_INV_ID,
      :OLD.EO_ID,
      :OLD.EXP_VOU_ID,
      :OLD.EXT_DOC_DT,
      :OLD.EXT_DOC_NO,
      :OLD.EX_TRD_FLG,
      :OLD.FORM_AMT,
      :OLD.FORM_NO,
      :OLD.FORM_RCVD,
      :OLD.FORM_RCVD_DT,
      :OLD.FORM_RCVD_RMRK,
      :OLD.FY_ID,
      :OLD.HO_ORG_ID,
      :OLD.INCL_SRVC_ITM,
      :OLD.INTIM_SLIP_ID,
      :OLD.INV_MODE,
      :OLD.INV_STAT,
      :OLD.INV_SUB_TYPE,
      :OLD.INV_TYPE,
      :OLD.LC_ID,
      :OLD.MAIL_SENT_CHK,
      :OLD.MANUL_REMOV_DT,
      :OLD.ORG_ID,
      :OLD.PDR_CALCULATED,
      :OLD.PEND_LC_AMT,
      :OLD.PRJ_ID,
      :OLD.REASON,
      :OLD.REF_DOC_ID,
      :OLD.REMARKS,
      :OLD.REV_EXP_VOU_ID,
      :OLD.REV_SALES_VOU_ID,
      :OLD.RPRT_PRNT_CNT,
      :OLD.SALES_VOU_ID,
      :OLD.SEI_CALCULATED,
      :OLD.SHIP_TO_ADDS,
      :OLD.SHIP_TO_NM,
      :OLD.SLOC_ID,
      :OLD.SUPPLI_OPER_TYPE,
      :OLD.TAX_AFTER_DISC_FLG,
      :OLD.TAX_FORM_TYP_ID,
      :OLD.TAX_RULE_FLG,
      :OLD.TOT_AMT_BS,
      :OLD.TOT_AMT_SP,
      :OLD.TOT_ITM_AMT_GS_BS,
      :OLD.TOT_ITM_AMT_GS_SP,
      :OLD.USR_ID_CREATE,
      :OLD.USR_ID_CREATE_DT,
      :OLD.USR_ID_MOD,
      :OLD.USR_ID_MOD_DT,
      SYSTIMESTAMP,
      'D',
      'SLS',
      (SELECT SYS_CONTEXT('USERENV','IP_ADDRESS') FROM DUAL
      ),
	  :OLD.TAX_TYPE,
	  :OLD.REF_SO_ID
    );
END IF;
END;










/
ALTER TRIGGER "SLS"."TRG_SLS$INV" ENABLE;
